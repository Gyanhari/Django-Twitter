{% extends 'adminBase.html' %}
{% load static %}
{% block style %}
<style>
    table {
        width: 100vh;
        border-collapse: collapse;
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    th {
        background-color: #f2f2f2;
    }

    img {
        max-width: 100px;
        max-height: 100px;
        cursor: pointer;
    }
    td a{
        text-decoration: none;
        color: black;
    }
     /* Style for the delete button */
     .delete-button {
        background-color: red; /* Red color for danger */
        color: white; /* White text color */
        padding: 10px 20px; /* Padding around the text */
        border: none; /* No border */
        border-radius: 5px; /* Rounded corners */
        cursor: pointer; /* Cursor style */
        font-size: 16px; /* Font size */
    }

    /* Hover effect for the delete button */
    .delete-button:hover {
        background-color: rgb(167, 13, 13); /* Darker shade of red on hover */
    } /* Style for the delete button */
     .approve_button {
        background-color: blue; /* Red color for danger */
        color: white; /* White text color */
        padding: 10px 20px; /* Padding around the text */
        border: none; /* No border */
        border-radius: 5px; /* Rounded corners */
        cursor: pointer; /* Cursor style */
        font-size: 16px; /* Font size */
    }

    /* Hover effect for the delete button */
    .approve_button:hover {
        background-color: rgb(10, 10, 170); /* Darker shade of red on hover */
    }
</style>
{% endblock style %}

{% block rightcontainer %}
<h1>Approved Posts</h1>
<div>
    <table>
        <thead>
            <tr>
                <th>SN</th>
                <th>User</th>
                <th>Caption</th>
                <th>Post</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for post in approved_posts %}
            <tr>
                <td>{{ forloop.counter }}</td> <!-- Display serial number -->
                <td><a href="{% url 'post_details' post.id %}">{{ post.user|title }}</a></td> <!-- Display user -->
                <td><a href="{% url 'post_details' post.id %}">{{ post.caption|truncatewords_html:40 }} {# Truncate the text to 20 words #}</a></td> <!-- Display caption -->
                <!-- Check if post has an image -->
                <td>
                    {% if post.image %}
                    <a href="{{ post.image.url }}" target="_blank">
                        <img src="{{ post.image.url }}" alt="Post Image">
                    </a>
                    {% else %}
                    No Image
                    {% endif %}
                </td>
                <!-- Display delete button for approved posts -->
                <td>
                    <form action="" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button type="submit" name="action" value="reject" class="delete-button">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}