<!-- index.html -->
{% extends 'home.html' %}
{% load static %}

{% block title %}
Profile - SISS
{% endblock %}

{% block style %}
<style>
    .home-page-title{
    font-weight: bold;
    font-size: 19px;
    width: 100%;
    height: 10vh;
    background-color: #FFFFFF;
    display: flex;
    align-items: center;
    padding-left: 25px;
    border-bottom: 5px solid #FFFFFF;
    padding-bottom: 10px;
}
.main-tweets-container{
    display: flex;
    flex-direction: column;

}
.tweets-main-block{
    background-color: #FFFFFF;
    /*margin-bottom: 5px;*/
    margin-top: 5px;

}
.tweets-block-user-info{
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 5px;
}
a{
    text-decoration: none;
    color: black;
}
.tweets-user-rating{
    margin-left: auto;
    margin-right: 50px;
}
.tweets-block-profile-image{
    display: flex;
    align-items: center;
    padding: 10px;
    border-radius: 22px;
}
.tweets-user-profile-picture{
    width: 48px;
    height: 48px;
    border-radius: 24px;
}
.tweets-main-body{
    margin-left: 75px;
    
}
.tweets-main-body-desc{
    margin-bottom: 15px;
}
.tweets-main-body-media{
    max-width: 100%;
    max-height: 500px;
    border-radius: 20px;
}

.tweets-block-user-info p{
    font-size: 20px;
}

.tweets-main-body p{
    font-size: 20px;
}
.tweets-like-and-comments{
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    gap: 200px;
    margin-top: 15px;
    padding-bottom: 15px;
    text-decoration: none;
}
.tweets-like-and-number, .tweets-comment-and-number{
    display: flex;
    align-items: center;
    gap: 9px;
}
.comment_profile_username{
    display:flex;
    flex-direction: row;
}
.comment p{
    font-size: medium;
}




.comments-section {
    margin-top: 20px;
}

.comment {
    margin-bottom: 20px;
    padding: 15px;
    border-radius: 10px;
    background-color: #f5f5f5;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    width: 100vh;
}

.user-info {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.profile-image {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}

.username {
    font-weight: bold;
    margin: 0;
}

.comment-text {
    margin: 0;
    font-size: 16px;
    line-height: 1.4;
}




/* Style for the comment form */
.comment-form {
    width: 100vh;
    display: flex;
    flex-direction: column;
    align-items: stretch;
}

/* Style for the comment textarea */
.comment-textarea {
    resize: none;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-bottom: 10px;
    font-size: 14px;
    line-height: 1.5;
}

/* Style for the comment submit button */
.comment-submit-btn {
    padding: 10px 20px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.comment-submit-btn:hover {
    background-color: #0056b3;
}

</style>
{% endblock %}

{% block middle-block %}
<div class="tweets-main-block">
    <div class="tweets-block-user-info">
        <div class="tweets-block-profile-image">
            <img class="tweets-user-profile-picture" src="{{user_profile.profileimg.url}}" alt="">
        </div>
        <div class="tweets-block-user-info">
            <p><strong><a href="/profile/{{post.user}}">{{post.user|title}}</a></strong></p>
            <p style="color:#666"><small>@{{post.first_name}} {{post.last_name}}</small></p></a>
            <h3>&#x2022;</h3>
            </p>
            <div style="display: flex; flex-direction: column;">
                <p style="color:#666"><small>{{post.created_at}}</small></p>
            </div>
        </div>
        <div class="tweets-user-rating">
            asdasdsa
        </div>
    </div>
    <div class="tweets-main-body">
        {% if post.caption %}
        <p class="tweets-main-body-desc">{{ post.caption }}</p>
        {% endif %}

        {% if post.image %}
			{% if post.image.url|slice:'-3:' == 'jpg' or post.image.url|slice:'-4:' == 'jpeg' %}
				<img src="{{ post.image.url }}" alt="" class="tweets-main-body-media">
			{% elif post.image.url|slice:'-3:' == 'png' %}
				<img src="{{ post.image.url }}" alt="" class="tweets-main-body-media">
			{% else %}
				<!-- Display other file types -->
				<a href="{{ post.image.url }}" target="_blank">{{ post.image.name }}</a>
			{% endif %}
		{% endif %}
        <div class="tweets-like-and-comments">
           
          
            <!-- Modal for comments -->
            <div class="modal fade" id="commentModal{{ post.id }}" tabindex="-1" role="dialog" aria-labelledby="commentModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal fade" id="commentModal{{ post.id }}" tabindex="-1" role="dialog" aria-labelledby="commentModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <!-- <div class="modal-content">
                                 <div class="modal-header">
                                        <h5 class="modal-title" id="commentModalLabel">Comment</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    
                                </div> -->
                            </div>
                        </div>
                        <div class="tweets-like-and-comments">
                            <a href="/like-post?post_id={{post.id}}" class="flex items-center space-x-2">
                                <div class="tweets-like-and-number">
                                    <img class="tweet-not-liked" src="{% static 'images/heart.svg' %}" alt="">
                                    <p style="color:black; text-decoration: none;" class="tweet-liked-number">
                                        {% if post.no_of_likes == 0 %}
                                    <p style="color:black; text-decoration: none;">0</p>
                                    {% elif post.no_of_likes == 1 %}
                                    <p style="color:black; text-decoration: none;">{{post.no_of_likes}}</p>
                                    {% else %}
                                    <p style="color:black; text-decoration: none;">{{post.no_of_likes}}</p>
                                    {% endif %}</p>
                                </div>
                            </a>
                            <!-- <a href="{% url 'comment' post.id %}">comment</a> -->
            
            
                        </div>
                        
                        <div class="comments-section mt-4">
                            <h4>Comments:</h4>
                            <div class="modal-body">
                                <!-- Comment form -->
                                <form id="commentForm{{ post.id }}" method="post" action="{% url 'comment' post.id %}" class="comment-form">
                                    {% csrf_token %}
                                    <textarea name="comment_text" class="form-control comment-textarea" rows="3" placeholder="Write your comment..."></textarea>
                                    <button type="submit" class="btn btn-primary comment-submit-btn">Submit</button>
                                </form>
                            </div>
                            
                            {% if comments %}
                                {% for comment in comments %}
                                    <div class="comment">
                                        <p>{{ comment.text }}</p><br>
                                        <div class="comment_profile_username">
                                        <!-- <img src="{{ comment.profileimg.url }}" alt="Profile Image"> -->
                                        <a href="/profile/{{post.user}}"><p style="font-weight: 600;">{{ comment.user.username|title }}</p></div></a>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <p>No comments yet.</p>
                            {% endif %}
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}